@use 'sass:map';
@use 'common/var' as *;
@use 'mixins/mixins' as *;
@use 'mixins/var' as *;

:root {
  @include set-component-css-var('marquee', $marquee);
}

@include b(marquee) {
  position: relative;
  overflow: hidden;

  @include m(horizontal) {
    height: getCssVar('marquee', 'scroll-content-horizontal-height');
    line-height: getCssVar('marquee', 'scroll-content-horizontal-line-height');
    display: flex;
    align-items: center;
  }

  @include m(vertical) {
    height: getCssVar('marquee', 'scroll-content-vertical-height');
    line-height: getCssVar('marquee', 'scroll-content-vertical-line-height');
    display: flex;
    align-items: center;
  }

  @include e(content) {
    display: flex;
    align-items: center;
    // 添加硬件加速，提升滚动性能
    transform: translateZ(0);
    backface-visibility: hidden;
    perspective: 1000px;

    @include m(horizontal) {
      white-space: nowrap;
      flex-direction: row;
      position: relative;
      gap: 0;
      display: inline-flex;
      align-items: center;
      
      // 确保副本紧密排列，避免间隙
      & > * {
        flex-shrink: 0;
        margin: 0;
        padding: 0;
      }
      
      // 处理副本内多个元素的情况
      .el-marquee__copy {
        display: inline-flex;
        align-items: center;
        gap: 0;
        margin: 0;
        padding: 0;
        
        & > * {
          flex-shrink: 0;
          margin: 0;
          padding: 0;
        }
      }
    }

    @include m(vertical) {
      flex-direction: column;
      height: auto;
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      align-items: center;
      gap: 0;
      
      // 确保副本紧密排列，避免间隙
      & > * {
        flex-shrink: 0;
        margin: 0;
        padding: 0;
      }
      
      // 处理副本内多个元素的情况
      .el-marquee__copy {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 0;
        margin: 0;
        padding: 0;
        
        & > * {
          flex-shrink: 0;
          margin: 0;
          padding: 0;
        }
      }
    }
  }

  // 副本样式
  @include e(copy) {
    flex-shrink: 0;
    margin: 0;
    padding: 0;
  }

  // 移除CSS动画，使用JavaScript控制滚动
  .#{$namespace}-marquee__content--horizontal,
  .#{$namespace}-marquee__content--vertical {
    animation: none;
  }

  // 响应式设计
  @media (max-width: getCssVar('marquee', 'responsive-breakpoint')) {
    @include m(vertical) {
      height: getCssVar('marquee', 'responsive-vertical-height');
    }
  }
}
